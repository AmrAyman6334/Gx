<!-- index.html -->
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GxBot — بوت ديسكورد متكامل</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- Font Awesome (icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    :root{
      --bg1: #071029;   /* deep navy */
      --bg2: #0b1220;   /* darker */
      --card: rgba(255,255,255,0.03);
      --muted: rgba(255,255,255,0.85);
      --muted-soft: rgba(255,255,255,0.72);
      --accent: #6c7cff; /* bluish */
      --accent-2: #ff6fb3; /* pink */
      --gold: linear-gradient(90deg,#ffd36b,#f1c40f);
      --glass: rgba(255,255,255,0.03);
      --glass-border: rgba(255,255,255,0.06);
      --radius: 14px;
      --shadow: 0 10px 30px rgba(2,6,23,0.7);
      --glow: 0 6px 30px rgba(108,124,255,0.12);
    }

    /* Animated gradient background */
    body {
      margin: 0;
      font-family: "Poppins", "Segoe UI", Tahoma, Arial, system-ui;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(108,124,255,0.12), transparent),
                  radial-gradient(1200px 600px at 90% 90%, rgba(241,111,179,0.06), transparent),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      color: var(--muted);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* subtle moving overlay */
    .bg-anim {
      position: fixed; inset: 0; z-index: 0; pointer-events: none; mix-blend-mode: overlay;
      background: conic-gradient(from 120deg at 50% 50%, rgba(255,215,100,0.03), transparent 25%, rgba(108,124,255,0.02), transparent 60%);
      animation: rotateBG 30s linear infinite;
      opacity: 0.9;
    }
    @keyframes rotateBG { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }

    main { position: relative; z-index: 5; max-width: 1100px; margin: 28px auto 80px; padding: 18px; }

    header {
      display: flex; gap: 16px; align-items: center; justify-content: space-between;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      padding: 16px; border-radius: 14px; border: 1px solid var(--glass-border); box-shadow: var(--shadow);
      backdrop-filter: blur(6px);
    }

    .brand { display:flex; gap:12px; align-items:center; }
    /* circular bot image */
    .bot-avatar {
      width: 96px; height:96px; border-radius:50%;
      overflow:hidden; display:flex; align-items:center; justify-content:center;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border: 3px solid rgba(255,255,255,0.06);
      box-shadow: 0 8px 26px rgba(0,0,0,0.6), 0 0 30px rgba(108,124,255,0.08);
      flex-shrink:0;
    }
    .bot-avatar img { width:100%; height:100%; object-fit:cover; display:block; }

    .title h1 { margin:0; font-size:20px; color: #ffd36b; letter-spacing: .6px; }
    .title p { margin:4px 0 0; font-size:13px; color:var(--muted-soft) }

    .controls { display:flex; gap:8px; align-items:center; }
    .btn { background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
           border:1px solid var(--glass-border); padding:8px 10px; border-radius:10px; cursor:pointer; color:var(--muted);
           display:inline-flex; gap:8px; align-items:center; font-weight:600; }
    .btn.glow { box-shadow: var(--glow); }

    /* hero */
    .hero { display:flex; gap:20px; align-items:center; margin-top:18px; flex-wrap:wrap; }
    .hero-left { flex:1; min-width:260px; }
    .hero-left h2 { margin:0; font-size:26px; color: #fff; }
    .hero-left p { margin-top:10px; color:var(--muted-soft); line-height:1.7; font-size:15px; }

    .cta-row { margin-top:16px; display:flex; gap:10px; flex-wrap:wrap; }
    .cta {
      padding:12px 16px; border-radius:999px; font-weight:800; display:inline-flex; gap:12px; align-items:center; cursor:pointer; border:none;
      color: #071029; text-decoration:none;
    }
    .cta.invite { background: linear-gradient(90deg,#ffd36b,#f1c40f); box-shadow: 0 8px 30px rgba(241,196,15,0.12); }
    .cta.support { background: linear-gradient(90deg,#6ce2b1,#19a974); color:#022; }
    .cta.dashboard { background: linear-gradient(90deg,#ff7a9a,#ff6fb3); color:#fff; }

    .hero-right { width:340px; min-width:240px; }
    .botcard { border-radius:14px; padding:16px; border:1px solid var(--glass-border); background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); box-shadow: var(--shadow); }
    .botcard h3 { margin:0; color:var(--accent); }
    .bot-stats { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:12px; }
    .stat { background:var(--card); padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); text-align:center; }
    .stat .label { font-size:12px; color:var(--muted-soft); }
    .stat .value { font-weight:800; font-size:16px; color:#fff; margin-top:6px; letter-spacing:0.4px; }

    .divider { height:1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.04), transparent); margin:26px 0; border-radius:4px; }

    /* features grid */
    .showcase { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:14px; }
    .card {
      position:relative; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); padding:16px;
      border-radius:12px; border:1px solid var(--glass-border); transition: transform .22s ease, box-shadow .22s ease;
      cursor:pointer; box-shadow: 0 6px 18px rgba(2,6,23,0.5);
      overflow:hidden;
    }
    .card:hover { transform: translateY(-8px); box-shadow: 0 20px 50px rgba(2,6,23,0.65); }
    .card h3 { margin:0 0 8px 0; color:var(--accent); font-size:15px; }
    .card p { margin:0; font-size:13px; color:var(--muted-soft); line-height:1.5; }
    .card .chip { position:absolute; left:12px; bottom:12px; padding:6px 10px; border-radius:999px; background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; font-weight:800; font-size:12px; }

    /* prime section */
    .premium { margin-top:22px; border-radius:12px; padding:18px; border:1px solid rgba(255,215,100,0.08);
               background: linear-gradient(180deg, rgba(255,215,100,0.02), rgba(255,255,255,0.01)); box-shadow: 0 8px 40px rgba(255,215,100,0.03); }
    .premium .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:12px; margin-top:12px; }
    .premium-card { padding:12px; border-radius:10px; background: linear-gradient(180deg, rgba(255,215,100,0.06), rgba(255,215,100,0.02)); border:1px solid rgba(255,215,100,0.08); text-align:center; color:#062226; font-weight:700; }

    /* modal detail - single reused */
    .detail-view {
      position: fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60;
      background: linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.85));
      padding:24px; overflow:auto;
    }
    .detail-card {
      width: 100%; max-width:920px; border-radius:14px; padding:20px; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid var(--glass-border); box-shadow: 0 26px 60px rgba(2,6,23,0.8);
    }
    .detail-card h2 { margin:0; color: #ffd36b; }
    .detail-card .meta { margin-top:10px; color:var(--muted-soft); font-size:13px; }
    .detail-card .content { margin-top:16px; color:var(--muted-soft); line-height:1.7; font-size:14px; }
    .detail-card .actions { margin-top:18px; display:flex; gap:10px; flex-wrap:wrap; }

    .close-btn { float:left; border-radius:10px; padding:8px 10px; display:inline-flex; gap:8px; align-items:center; cursor:pointer; }

    footer { margin-top:28px; padding:18px; text-align:center; color:rgba(255,255,255,0.6); font-size:13px; }

    /* responsive adjustments */
    @media (max-width:900px){
      header { flex-direction: column; align-items:flex-start; gap:12px; }
      .hero-right { width:100%; }
      .bot-avatar { width:80px; height:80px; }
    }

    /* subtle button prevention: disable multiple clicks quickly */
    .disabled { pointer-events: none; opacity: 0.6; }
  </style>
</head>
<body>
  <div class="bg-anim" aria-hidden="true"></div>

  <main>
    <header role="banner" aria-label="header">
      <div class="brand">
        <div class="bot-avatar" aria-hidden="true">
          <!-- ضع ملف bot.png بجانب index.html -->
          <img src="bot.png" alt="صورة بوت GxBot (bot.png)" onerror="this.style.background='linear-gradient(90deg,#6c7cff,#ff6fb3)'; this.src='';" />
        </div>
        <div class="title">
          <h1>GxBot</h1>
          <p id="short-desc">بوت ديسكورد لإدارة، أمان، اقتصاد وترفيه — تجربة متكاملة ومضيئة.</p>
        </div>
      </div>

      <div class="controls" role="navigation" aria-label="controls">
        <a class="btn glow" id="inviteBtn" href="https://discord.com/oauth2/authorize?client_id=1411571554025865236&permissions=8&scope=bot" target="_blank" rel="noopener noreferrer">
          <i class="fa fa-plus"></i> دعوة البوت
        </a>
        <a class="btn" id="supportBtn" href="https://discord.gg/g43V2Q62KP" target="_blank" rel="noopener noreferrer">
          <i class="fa fa-comments"></i> سيرفر الدعم
        </a>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-left">
        <h2 id="hero-title">GxBot — إدارة، أمان، اقتصاد وترفيه في بوت واحد</h2>
        <p class="desc" id="hero-desc">
          بوت شامل يجمع إدارة السيرفر، نظام اقتصاد متكامل (Kentos)، نظام اجتماعي داخلي، حماية متقدمة، ومجموعة ترفيهية تضمن بقاء مجتمعك حيويًا ونشيطًا.
        </p>

        <div class="cta-row" role="group" aria-label="cta-buttons">
          <a id="inviteCTA" class="cta invite" href="#features" aria-controls="featuresGrid"><i class="fa fa-rocket"></i> اذهب للمميزات</a>
          <a id="primeCTA" class="cta dashboard" href="#prime" aria-controls="prime"><i class="fa fa-crown"></i> اشترك في Prime</a>
        </div>

        <div style="margin-top:14px;color:var(--muted-soft);font-size:13px">
          <strong>Kentos</strong>
          <span> — عملة البوت الداخلية لتفعيل المميزات الحصرية.</span>
        </div>
      </div>

      <aside class="hero-right" aria-label="bot-summary">
        <div class="botcard" role="region" aria-labelledby="botcard-title">
          <h3 id="botcard-title">بطاقة البوت</h3>
          <div class="bot-stats" aria-hidden="false">
            <div class="stat"><div class="label">السيرفرات</div><div class="value" id="stat-servers">—</div></div>
            <div class="stat"><div class="label">المستخدمين</div><div class="value" id="stat-users">—</div></div>
            <div class="stat"><div class="label">إجمالي Kentos</div><div class="value" id="stat-kentos">—</div></div>
            <div class="stat"><div class="label">Prime</div><div class="value" id="stat-prime">All-in-one</div></div>
          </div>
          <div style="margin-top:10px;font-size:13px;color:var(--muted-soft)">اضغط على أي ميزة لعرض شرح تفصيلي.</div>
        </div>
      </aside>
    </section>

    <div class="divider" aria-hidden="true"></div>

    <!-- FEATURES -->
    <section id="features" aria-labelledby="features-title">
      <h3 id="features-title" style="margin:0 0 8px 0;color:#ffd36b">أهم مميزات GxBot</h3>

      <div class="showcase" id="featuresGrid">
        <!-- Cards injected by JS -->
      </div>
    </section>

    <!-- PREMIUM -->
    <section id="prime" class="premium" aria-labelledby="prime-title">
      <h3 id="prime-title" style="margin:0;color:#ffd36b">GxBot Prime</h3>
      <p style="color:var(--muted-soft);margin-top:8px">مميزات حصرية بتصميم ذهبي ومضيء — تفعيل عبر Kentos أو الدفع المباشر.</p>
      <div class="grid">
        <div class="premium-card">🔒 أمان متقدم</div>
        <div class="premium-card">🚀 تخصيص واسع</div>
        <div class="premium-card">💎 مميزات حصرية</div>
        <div class="premium-card">📈 تقارير متقدمة</div>
      </div>
    </section>

    <div class="divider" aria-hidden="true"></div>

    <footer>
      <div id="footerText">© 2025 — هذا الموقع تم تصميمه بواسطة فريق GX — فريق دعم البوت.</div>
    </footer>
  </main>

  <!-- Detail overlay (single reused modal) -->
  <div id="detailView" class="detail-view" role="dialog" aria-modal="true" aria-hidden="true" tabindex="-1">
    <div class="detail-card" role="document" aria-labelledby="detailTitle">
      <button id="closeDetail" class="close-btn btn" aria-label="إغلاق النافذة"><i class="fa fa-times"></i> إغلاق</button>
      <div style="clear:both"></div>
      <h2 id="detailTitle"></h2>
      <div class="meta" id="detailMeta"></div>
      <div class="content" id="detailContent"></div>
      <div class="actions" id="detailActions"></div>
    </div>
  </div>

  <script>
    /*************** Data (features + content) *****************/
    const INVITE_LINK = "https://discord.com/oauth2/authorize?client_id=1411571554025865236&permissions=8&scope=bot";
    const SUPPORT_LINK = "https://discord.gg/g43V2Q62KP";

    // Features — using the detailed texts you provided (Arabic)
    const features = [
      {
        id: "welcome",
        title: "ترحيب احترافي للأعضاء الجدد",
        short: "رسائل ترحيب مخصصة، رول تلقائي، 3 قنوات ترحيب وشروحات.",
        detail: `<h4>عند دخول عضو جديد</h4>
        <p>GxBot يرد برسائل ترحيب مخصصة ومصممة بشكل جميل. يمكنك تفعيل:</p>
        <ul>
          <li>3 قنوات مختلفة للترحيب.</li>
          <li>3 شروحات مدمجة لشرح السيرفر.</li>
          <li>رسالة ترحيب تلقائية عند الانضمام.</li>
          <li>إضافة رول تلقائي عند الدخول.</li>
        </ul>
        <p>الميزة تعطي انطباعًا احترافيًا وتجعل الأعضاء يشعرون بالترحيب والاندماج من أول لحظة.</p>`
      },
      {
        id: "bank",
        title: "نظام البنك (Kentos)",
        short: "محفظة لكل عضو، رقم حساب فريد، إيداع، سحب وتحويلات آمنة.",
        detail: `<h4>نظام البنك داخل GxBot</h4>
        <p>نظام البنك يمثل العمود الفقري لاقتصاد السيرفر، مصمم ليحاكي البنوك الحقيقية مع عنصر المتعة.</p>
        <h5>المميزات الأساسية</h5>
        <ol>
          <li><strong>رقم حساب فريد لكل عضو:</strong> يسهل التحويل ويضمن الدقة.</li>
          <li><strong>تحويلات آمنة ومرنة:</strong> تحويل داخلي بين أعضاء أو عبر سيرفرات مختلفة.</li>
          <li><strong>أنواع التحويلات:</strong> تحويل عادي والتحويل البنكي المضمون مع تحقق الهوية.</li>
          <li><strong>خدمات الإيداع والسحب:</strong> سحب الأرباح أو إيداعها في البنك لحماية الرصيد.</li>
        </ol>`
      },
      {
        id: "top",
        title: "نظام التوب والـ Leaderboards",
        short: "عرض أغنى 10 أعضاء وترتيب عالمي عبر السيرفرات.",
        detail: `<h4>نظام التوب</h4>
        <p>نظام التوب يعرض أغنى 10 أعضاء بتصميم فخم، ويسمح بالتنافس عبر جميع السيرفرات التي يعمل فيها البوت.</p>
        <ul>
          <li>عرض أغنى 10 أعضاء.</li>
          <li>ترتيب عالمي عبر سيرفرات متعددة.</li>
          <li>عرض مركزك الشخصي مع المسافة التي تفصلك عن التوب 10.</li>
        </ul>`
      },
      {
        id: "backgrounds",
        title: "نظام الخلفيات",
        short: "170+ خلفية، شراء بالـ Kentos، إهداء وإدارة بسيطة.",
        detail: `<h4>نظام الخلفيات</h4>
        <p>أكثر من 170 خلفية لتخصيص الملف الشخصي. يمكن شراؤها أو إهداؤها وتبديلها في أي وقت.</p>
        <ul>
          <li>مجموعة ضخمة ومتنوعة.</li>
          <li>شراء باستخدام Kentos.</li>
          <li>إمكانية الإهداء وإدارة المجموعة بسهولة.</li>
        </ul>`
      },
      {
        id: "xp_invites",
        title: "نظام XP والدعوات",
        short: "كسب XP من التفاعل، قوائم أعلى 5، وقوائم أفضل 10 للدعوات.",
        detail: `<h4>نظام الـXP والدعوات</h4>
        <p>كل سيرفر له نظام XP مستقل؛ تُكسب نقاط عبر الرسائل أو الصوت. توجد قوائم أعلى 5 للتشجيع.</p>
        <p>نظام الدعوات يعرض أفضل 10 أعضاء جلبًا لأعضاء جدد مع إحصائيات دقيقة.</p>`
      },
      {
        id: "tickets",
        title: "نظام التيكتات المتكامل",
        short: "فتح تيكت خاص، خصوصية، حفظ اللوغات ونظام تأكيد متقدم.",
        detail: `<h4>نظام التيكتات</h4>
        <p>فتح تذكرة خاصة لكل طلب أو مشكلة. تضمن الخصوصية وتنظيم العمل للفرق.</p>
        <h5>إضافات متقدمة:</h5>
        <ul>
          <li>عرض أبرز من فتحوا تذاكر.</li>
          <li>نظام تأكيد (تايكد) وتعليق التذكرة للمراجعة.</li>
          <li>حفظ محتوى التذكرة وإرساله إلى روم اللوغ بعد الإغلاق.</li>
        </ul>`
      },
      {
        id: "entertainment",
        title: "أنظمة ترفيهية وأوامر ممتعة",
        short: "عجلة GX، تشغيل القرآن، اقتراح أنمي/أفلام، اقتباسات وإحصائيات.",
        detail: `<h4>الترفيه في GxBot</h4>
        <p>مجموعة أوامر ترفيهية: عجلة GX، تشغيل القرآن، ترشيحات أنمي/أفلام، حكم واقتباسات، ومعلومات العضوية والسيرفر.</p>`
      },
      {
        id: "snipes",
        title: "لوغ المحذوفات (Snipes)",
        short: "توثيق كل ما يُحذف: نصوص، صور، فيديوهات مع إمكانية المراجعة.",
        detail: `<h4>لوغ المحذوفات</h4>
        <p>يحتفظ النظام بكل المحتوى المحذوف لمساعدة الإدارة على مراجعة المخالفات والاحتفاظ بالأدلة.</p>`
      },
      {
        id: "gxhip",
        title: "GxHip — الشبكة الاجتماعية داخل البوت",
        short: "بروفايل احترافي، منشورات، تعليقات ورسائل خاصة عبر السيرفرات.",
        detail: `<h4>GxHip</h4>
        <p>نظام تواصل اجتماعي داخل البوت: بروفايل، منشورات، لايكات، تعليقات، إدارة صداقات، ورسائل خاصة تعمل عبر السيرفرات.</p>`
      },
      {
        id: "audit",
        title: "سجلات وتوثيق النظام",
        short: "توثيق الطرد، التعديلات، التغييرات على القنوات والرتب بدقة.",
        detail: `<h4>التوثيق ومراجعة الأحداث</h4>
        <p>توثيق كامل لجميع الأحداث المهمة داخل السيرفر: طرد/باند، تغييرات الرتب، التعديلات على القنوات والرسائل.</p>`
      },
      {
        id: "transfer",
        title: "نقل البيانات الكاملة بين الحسابات",
        short: "نقل البروفايل، الرتب، الـ XP، البادجات والعناصر بأمان.",
        detail: `<h4>نقل كامل للبروفايل</h4>
        <p>نقل كامل للبيانات بين حسابين: صور بروفايل، الرانكات، المستويات، البادجات والمشتريات، مع الحفاظ على الملكية والأمان.</p>`
      },
      {
        id: "verification",
        title: "توثيق الحسابات وحماية الخصوصية",
        short: "توثيق رسمي، شارات، مراجعة إدارية وإمكانية استعادة الحساب.",
        detail: `<h4>توثيق GxBot</h4>
        <ol>
          <li>حماية شاملة للبيانات.</li>
          <li>تسجيل رسمي لدى فريق الدعم.</li>
          <li>شارات توثيق ومراجعة دقيقة.</li>
          <li>استعادة الحساب ونقل البيانات بأمان.</li>
        </ol>`
      }
    ];

    /*************** Render features grid *****************/
    const featuresGrid = document.getElementById("featuresGrid");
    function renderFeatures(){
      featuresGrid.innerHTML = "";
      features.forEach(f=>{
        const card = document.createElement("button");
        card.className = "card";
        card.type = "button";
        card.setAttribute("data-id", f.id);
        card.innerHTML = `
          <h3>${f.title}</h3>
          <p>${f.short}</p>
          <span class="chip">المزيد</span>
        `;
        // Accessibility
        card.setAttribute("aria-haspopup","dialog");
        card.addEventListener("click", ()=> openFeature(f.id));
        card.addEventListener("keydown", (e)=> { if(e.key === "Enter" || e.key === " ") { e.preventDefault(); openFeature(f.id); }});
        featuresGrid.appendChild(card);
      });
    }

    /*************** Modal logic (single reused modal) *****************/
    const detailView = document.getElementById("detailView");
    const detailTitle = document.getElementById("detailTitle");
    const detailMeta = document.getElementById("detailMeta");
    const detailContent = document.getElementById("detailContent");
    const detailActions = document.getElementById("detailActions");
    const closeDetail = document.getElementById("closeDetail");

    let modalOpen = false;
    function openFeature(id){
      // prevent rapid double clicks
      if(modalOpen) return;
      modalOpen = true;

      const f = features.find(x=>x.id===id);
      if(!f) { modalOpen = false; return; }

      detailTitle.innerText = f.title;
      detailMeta.innerHTML = `<strong>معرف:</strong> ${f.id}`;
      detailContent.innerHTML = f.detail;

      // actions: invite + support (reused, not creating new windows)
      detailActions.innerHTML = "";
      const invite = document.createElement("a");
      invite.className = "cta invite";
      invite.href = INVITE_LINK;
      invite.target = "_blank";
      invite.rel = "noopener noreferrer";
      invite.innerHTML = `<i class="fa fa-plus"></i> دعوة البوت`;
      detailActions.appendChild(invite);

      const support = document.createElement("a");
      support.className = "cta support";
      support.href = SUPPORT_LINK;
      support.target = "_blank";
      support.rel = "noopener noreferrer";
      support.innerHTML = `<i class="fa fa-comments"></i> سيرفر الدعم`;
      detailActions.appendChild(support);

      // Show modal (single reused)
      detailView.style.display = "flex";
      detailView.setAttribute("aria-hidden","false");
      // manage focus
      detailView.focus();
      document.body.style.overflow = "hidden";

      // small debounce to avoid multiple openings
      setTimeout(()=> { modalOpen = false; }, 200);
    }

    function closeOverlay(){
      detailView.style.display = "none";
      detailView.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
    }
    closeDetail.addEventListener("click", closeOverlay);
    detailView.addEventListener("click", (e)=> { if(e.target === detailView) closeOverlay(); });
    window.addEventListener("keydown", (e)=> { if(e.key === "Escape") closeOverlay(); });

    /*************** Prevent duplicate window behavior note ***************
     We reuse a single modal for all features, and invite/support open in a new tab only when clicked.
     The cards are buttons (not links) — they open the modal only once and do not spawn extra windows.
    ************************************************************************/

    /*************** small UX + stats placeholders *****************/
    document.getElementById("stat-servers").innerText = "—";
    document.getElementById("stat-users").innerText = "—";
    document.getElementById("stat-kentos").innerText = "—";

    // render
    renderFeatures();

    // smooth scroll to anchors
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', function(e){
        const target = document.querySelector(this.getAttribute('href'));
        if(target){
          e.preventDefault();
          target.scrollIntoView({behavior:'smooth', block:'start'});
        }
      });
    });

    /*************** small accessibility: trap focus inside modal when open (simple) ***************/
    // Note: lightweight trap (not full robust), suffices for basic UX
    document.addEventListener('focus', function(event) {
      if(detailView.style.display === 'flex' && !detailView.contains(event.target)) {
        event.stopPropagation();
        detailView.focus();
      }
    }, true);

    /*************** helpful tip: hash routing opens feature if present ***************/
    function handleHash(){
      const h = location.hash || "";
      if(h.startsWith("#feature-")){
        const id = h.replace("#feature-","");
        const exists = features.some(f=>f.id===id);
        if(exists) openFeature(id);
      }
    }
    window.addEventListener('hashchange', handleHash);
    handleHash();
  </script>
</body>
</html>